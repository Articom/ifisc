<?phpsession_start();include_once "open_conn.php";$usuario = $_POST["usuario"];$clave = $_POST["clave"];//se desencripta la contrasea con md5$ssql ="SELECT * FROM usuario u where u.Nombre= '$usuario' AND u.Password='".md5($clave)."'";//Ejecuto la sentencia $rs = mysql_query($ssql,$conn); $fila= mysql_fetch_assoc($rs);   if (mysql_num_rows($rs)!=0){      	//usuario y contrasea vlidos     //comprobamos el estado del usuario     //el estado 1 es el estado de activo    if ($fila['Estado'] === '1') {        //defino una sesion y guardo datos       session_start();       $_SESSION['autentificado']= "SI";       $_SESSION['logged_user'] = $fila['Nombre'];      $_SESSION['id_usuario'] = $fila['id'];      $_SESSION['oneshotMessage'] = false;      header("HTTP/1.1 301 Moved Permanently");      header ("Location: /ifisc/index.php");        exit;     }else{      //muestro el mensaje de error referente al estado del usuario      //si es un usuario registrado con el rol de estudiante      if ($fila['id_role'] === '3') {        header("HTTP/1.1 301 Moved Permanently");        header("Location: /ifisc/local/sesion/login.php?error=err2");         exit;      }else{        header("HTTP/1.1 301 Moved Permanently");        header("Location: /ifisc/local/sesion/login.php?error=err2&&priv=1");         exit;      }           }       }else {      	//si no existe le mando otra vez a la portada   	  header("HTTP/1.1 301 Moved Permanently");     	header("Location: /ifisc/local/sesion/login.php?error=err1");   	exit;  }  ?>